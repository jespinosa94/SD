package sockets_guiada;
import java.lang.Exception;
import java.net.Socket;
import java.io.*;

public class HiloServidor extends Thread {
	private Socket skCliente;
	
	/*
	 * Constructor con argumentos
	 */
	public HiloServidor(Socket p_cliente) {
		this.skCliente = p_cliente;
	}
	
	/*
	 * Devuelve el nº de bytes leidos
	 * 0 si se cierra el fichero
	 * -1 error
	 */
	public String leeSocket(Socket p_sk, String p_Datos) {
		try {
			InputStream aux = p_sk.getInputStream();
			DataInputStream flujo = new DataInputStream(aux);
			p_Datos = new String();
			p_Datos = flujo.readUTF();
		} catch (Exception e) {
			System.out.println("Error" + e.toString());
		}
		return p_Datos;
	}
	
	/*
	 * Escribe en el socket del cliente. Devuelve en nº de bytes escritos
	 * -1 error
	 */
	
	public void escribeSocket(Socket p_sk, String p_Datos) {
		try {
			OutputStream aux = p_sk.getOutputStream();
			DataOutputStream flujo = new DataOutputStream(aux);
			flujo.writeUTF(p_Datos);
		} catch (Exception e) {
			System.out.println("Error: " + e.toString());
		}
	}
	
	public String anyadirMarca(int codigoMarca, String modeloCoche) {
		String nombreVenta = "";
		switch (codigoMarca) {
		case 0: nombreVenta = "El modelo " + modeloCoche + " no tiene una marca asociada";
		case 1: nombreVenta = "Ferrari " + modeloCoche;
		case 2: nombreVenta = "Tesla " + modeloCoche;
		case 3: nombreVenta = "Audi " + modeloCoche;
		default: nombreVenta = "Error, no se ha podido procesar el código del coche";
		}
		return nombreVenta;
	}
	
	public void run() {
		String nombreVenta = "";
		try {
			
		} catch(Exception e) {
			System.out.println("Error: " + e.toString());
		}
	}
}
